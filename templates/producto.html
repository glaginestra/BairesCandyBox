{% extends 'layout.html' %} {% block extra_css %}
<link
  rel="stylesheet"
  href="{{ url_for('static', filename='CSS/producto.css') }}"
/>
{% endblock %} {% block title %}BairesCandyBox - Producto{% endblock %} {% block
content %}
<section id="producto">
  <div class="ruta-ubi">
    <p>
      <span style="color: rgb(95, 94, 94)">
        <a href="/" style="color: rgb(95, 94, 94)">Inicio</a> /
        <a href="/catalogo/{{categoria}}" style="color: rgb(95, 94, 94)">
          {{producto.categoria.nombre}}
        </a>
        /
      </span>
      <span style="font-family: Bree Serif, serif">{{producto.nombre}}</span>
    </p>
  </div>

  <div class="container-img-prod">
    <div class="container-img-pri-secu">
      <div class="img-secu">
        {% for foto in fotos_secundarias %}
        <img
          src="{{ url_for('static', filename=foto.url) }}"
          alt=""
          onclick="openModal({{ loop.index }})"
        />
        {% endfor %}
      </div>
  
      <div class="img-principal">
        <img
          src="{{ url_for('static', filename='uploads/' + producto.imagen_principal) }}"
          alt=""
          onclick="openModal(0)"
        />
      </div>
    </div>

    <div class="info-prod">
      <h2>{{producto.nombre}}</h2>
      <h2>
        ${{ "{:,.2f}".format(producto.precio).replace(',', 'X').replace('.',
        ',').replace('X', '.') }}
      </h2>
      <h3>Cantidad</h3>
      <form action="/datos-personales/{{producto.id}}" method="GET">
        <input
          type="number"
          name="precio-compra"
          id="precio-compra"
          value="{{producto.precio}}"
          style="display: none"
        />
        <input type="number" name="cantidad" id="cantidad" min="1" value="1" />
        {% if categoria != "plantillasdigitales" %}
        <div class="msg-importante">
          <h3>IMPORTANTE!</h3>
          <p>
            Antes de realizar una compra consultar a través de cualquier medio
            de contacto la fecha de entrega y temática deseada.
          </p>
          <a href="/contacto">NUESTROS CONTACTOS</a>
        </div>
        {% endif %}
        <button type="submit" class="comprar-prod">COMPRAR PRODUCTO</button>
      </form>
    </div>
  </div>

  <div class="desc-prod">
    <h2>DESCRIPCIÓN</h2>
    <p>{{producto.descripcion}}</p>
    <ul>
      <li>Todos los productos son totalmente personalizados. No trabajo con stock.</li>
      <li>Se puede personalizar con cualquier temática.</li>
      <li>La demora en la entrega es entre 10 y 15 días, y el tiempo puede variar dependiendo de la demanda de esa fecha, asi como tambien de las cantidades que necesites.</li>
      <li>Antes de realizar la compra, es importante que consultes previamente disponibilidad de la fecha para poder realizar el trabajo.</li>
      <li>Hago envíos a todo el país, así como también podes pasar a retirar por CABA.</li>
      <li>Respecto a los envíos, los realizo mediante Andreani o Correo Argentino. Te cotizo el envío mediante la empresa de logística que te quede mejor, y el mismo se adiciona al costo total de la compra que realices.</li>
      <li>Respecto al embalaje de las cajitas, se embalan semi armadas para evitar roturas en el traslado. Son de fácil armado, te indico cómodebes ensamblarlas y te doy el soporte que necesites en el momento que el producto te llegue.</li>
    </ul>
  </div>
</section>

<div
  id="loader"
  style="
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(255, 255, 255, 0.7);
    z-index: 9999;
    text-align: center;
    padding-top: 12.5em;
  "
>
  <div class="spinner"></div>
  <p>Cargando...</p>
</div>

<div id="modal">
  <span class="close" onclick="closeModal()">&times;</span>
  <span class="arrow arrow-left" onclick="prevImage()">&#10094;</span>
  <span class="arrow arrow-right" onclick="nextImage()">&#10095;</span>
  <img id="modal-img" src="" />
</div>

{% block scripts %}
<script>
  let currentIndex = 0;
  const images = [
      "{{ url_for('static', filename='uploads/' + producto.imagen_principal) }}"
      {% for foto in fotos_secundarias %},
      "{{ url_for('static', filename=foto.url) }}"
      {% endfor %}
  ];

  function openModal(index) {
      currentIndex = index;
      document.getElementById('modal').style.display = 'block';
      document.getElementById('modal-img').src = images[currentIndex];
  }

  function closeModal() {
      document.getElementById('modal').style.display = 'none';
  }

  function nextImage() {
      currentIndex = (currentIndex + 1) % images.length;
      document.getElementById('modal-img').src = images[currentIndex];
  }

  function prevImage() {
      currentIndex = (currentIndex - 1 + images.length) % images.length;
      document.getElementById('modal-img').src = images[currentIndex];
  }

  window.onclick = function(event) {
      if(event.target == document.getElementById('modal')) {
          closeModal();
      }
  }
</script>
<script src="{{ url_for('static', filename='JS/home.js') }}"></script>

<style>
  #modal {
    display: none;
    position: fixed;
    z-index: 9999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.9);
  }

  #modal img {
    display: block;
    margin: auto;
    max-width: 80%;
    max-height: 80%;
  }

  /* Close en la esquina superior derecha */
  .close {
    position: fixed;
    top: 20px;
    right: 35px;
    color: white;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
    z-index: 10001;
  }

  .arrow {
    position: absolute;
    top: 50%;
    font-size: 50px;
    color: white;
    cursor: pointer;
    user-select: none;
    padding: 10px;
    transform: translateY(-50%);
  }

  .arrow-left {
    left: 20px;
  }

  .arrow-right {
    right: 20px;
  }
</style>
{% endblock %} {% endblock %}
